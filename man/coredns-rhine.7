.\" Generated by Mmark Markdown Processer - mmark.miek.nl
.TH "COREDNS-RHINE" 7 "July 2023" "CoreDNS" "CoreDNS Plugins"

.SH "NAME"
.PP
\fIrhine\fP - copy of the \fIfile\fP plugin, but runs a DNS server returning
rhine-specific txt records for zone authentication.

.SH "DESCRIPTION"
.PP
The \fIrhine\fP plugin is used for an "old-style" DNS server. It serves
from a preloaded file that exists on disk contained RFC 1035 styled
data. If the zone file contains signatures, correct RHINE
answers(answer + ZSK + signatures + RCert) are returned. It also
supports scion, with scion enabled, scion TXT record will be returned
in glue records.  If you use this setup you are responsible for
re-signing the zonefile.

.SH "SYNTAX"
.PP
.RS

.nf
rhine DBFILE [ZONES...]

.fi
.RE

.IP \(bu 4
\fBDBFILE\fP the database file to read and parse. If the path is relative, the path from the \fIroot\fP
plugin will be prepended to it.
.IP \(bu 4
\fBZONES\fP zones it should be authoritative for. If empty, the zones from the configuration block
are used.


.PP
If you want to round-robin A and AAAA responses look at the \fIloadbalance\fP plugin.

.PP
.RS

.nf
rhine DBFILE [ZONES... ] {
    reload DURATION
    scion on/off
}

.fi
.RE

.IP \(bu 4
\fB\fCreload\fR interval to perform a reload of the zone if the SOA version changes. Default is one minute.
Value of \fB\fC0\fR means to not scan for changes and reload. For example, \fB\fC30s\fR checks the zonefile every 30 seconds
and reloads the zone when serial changes.
.IP \(bu 4
\fB\fCscion\fR option to enable/disable SCION support.
if enabled, SCION TXT record that contains SCION address will be returned in glue records instead of A and AAAA records.


.SH "EXAMPLES"
.PP
Load the \fB\fCexample.org\fR zone from \fB\fCdb.example.org\fR and enable scion support

.PP
.RS

.nf
example.org {
    rhine db.example.org {
        scion on
    }
}

.fi
.RE

.PP
Note that if you have a configuration like the following you may run into a problem of the origin
not being correctly recognized:

.PP
.RS

.nf
\&. {
    rhine db.example.org
}

.fi
.RE

.PP
We omit the origin for the file \fB\fCdb.example.org\fR, so this references the zone in the server block,
which, in this case, is the root zone. Any contents of \fB\fCdb.example.org\fR will then read with that
origin set; this may or may not do what you want.
It's better to be explicit here and specify the correct origin. This can be done in two ways:

.PP
.RS

.nf
\&. {
    rhine db.example.org example.org
}

.fi
.RE

.PP
Or

.PP
.RS

.nf
example.org {
    file db.example.org
}

.fi
.RE

